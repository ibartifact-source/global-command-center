<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ä¿æŒç°¡æ½”é¢¨æ ¼ï¼Œç¢ºä¿å³éµç¿»è­¯é¸å–®ä¸æœƒè¢«é®æ“‹ */
        body { background: transparent; color: white; }
        .msg-content { transition: all 0.3s ease; }
        .sync-flash { animation: flash 0.5s ease-out; }
        @keyframes flash {
            0% { background: rgba(234, 179, 8, 0.5); }
            100% { background: transparent; }
        }
    </style>
</head>
<body class="p-4">
    <div class="flex justify-between items-center mb-4">
        <h2 class="text-xs font-black text-yellow-500 tracking-tighter uppercase">Incoming Stream</h2>
        <button onclick="forceTranslateSync()" 
                class="bg-yellow-500 hover:bg-yellow-400 text-black text-[10px] font-black px-3 py-1 rounded shadow-lg flex items-center gap-1 active:scale-95 transition-all">
            <span>ğŸ”„</span> SYNC & TRANSLATE
        </button>
    </div>

    <div id="message-display" class="bg-black/40 border border-white/10 rounded-lg p-4 min-h-[200px] msg-content">
        <p class="text-sm leading-relaxed" id="text-target">
            Waiting for incoming message from engineer...
        </p>
    </div>

    <script>
        function forceTranslateSync() {
            const target = document.getElementById('text-target');
            const originalText = target.innerText;
            
            // 1. ç‰©ç†æ¸…ç©ºï¼šèª˜ç™¼ Chrome åµæ¸¬è®Šå‹•
            target.innerText = "";
            
            // 2. çŸ­æš«å»¶é²å¾Œé‡æ–°å¡«å…¥å…§å®¹
            setTimeout(() => {
                target.innerText = originalText;
                
                // 3. è¦–è¦ºåé¥‹ï¼šé–ƒçˆæé†’åŒæ­¥å®Œæˆ
                const container = document.getElementById('message-display');
                container.classList.add('sync-flash');
                setTimeout(() => container.classList.remove('sync-flash'), 500);
                
                // ğŸ’¡ æç¤ºï¼šæ­¤æ™‚é»æ“Šå³éµã€Œç¿»è­¯æˆä¸­æ–‡ã€ï¼ŒChrome æœƒæ›´ç©©å®šåœ°é–å®šæ­¤å€å¡Š
                console.log("Translation trigger sent to browser.");
            }, 50);
        }

        // æ¨¡æ“¬è‡ªå‹•æ¥æ”¶è¨Šæ¯æ™‚ä¹Ÿè§¸ç™¼åŒæ­¥ (å¦‚æœæ˜¯ä½ åŸæœ¬å°±æœ‰çš„æ¥æ”¶é‚è¼¯ï¼Œè«‹æŠŠæ­¤å‡½å¼å¥—é€²å»)
        // function onNewMessageArrive(newText) {
        //    document.getElementById('text-target').innerText = newText;
        //    forceTranslateSync(); 
        // }
    </script>
</body>
</html>
